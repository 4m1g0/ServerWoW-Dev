From 974ae0e26c8822adc38c3d0b62b96766ba8b79a4 Mon Sep 17 00:00:00 2001
From: 4m1g0 <casadelblanco@gmail.com>
Date: Tue, 27 Mar 2012 02:53:12 +0200
Subject: [PATCH 10/27] Protectchannelpass

---
 src/server/game/Chat/Channels/Channel.cpp |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/src/server/game/Chat/Channels/Channel.cpp b/src/server/game/Chat/Channels/Channel.cpp
index 92cf4d7..8419e0b 100755
--- a/src/server/game/Chat/Channels/Channel.cpp
+++ b/src/server/game/Chat/Channels/Channel.cpp
@@ -144,6 +144,9 @@ void Channel::CleanOldChannelsInDB()
 
 void Channel::Join(uint64 p, const char *pass)
 {
+    if (strstr(m_name.c_str(), "Crb"))    // Evitamos que el carbonite use el servidor para enviarse datos
+        return;
+
     WorldPacket data;
     if (IsOn(p))
     {
@@ -395,7 +398,7 @@ void Channel::Password(uint64 p, const char *pass)
         MakeNotMember(&data);
         SendToOne(&data, p);
     }
-    else if (!players[p].IsModerator() && !AccountMgr::IsGMAccount(sec))
+    else if (/*!players[p].IsModerator() && */!AccountMgr::IsGMAccount(sec))
     {
         WorldPacket data;
         MakeNotModerator(&data);
-- 
1.7.5.4

